# 批发商户测试数据说明

## 概述

已为批发商户（merchant_001）生成30天的测试数据，用于测试税务报表和业务分析功能。

## 数据统计

### 生成的数据量
- **销售记录**: 283 条
- **维修记录**: 128 条
- **时间范围**: 过去30天

### 销售数据明细
- **销售总额**: €429,966.00
- **维修总额**: €8,630.00
- **应缴税额**: €24,565.01

### 按类别统计
- **全新设备**: 113 笔, €260,600.00
- **二手设备**: 128 笔, €164,270.00
- **配件**: 42 笔, €5,096.00

### 按支付方式统计
- **现金收入**: €177,013.00
- **刷卡收入**: €261,583.00

## 产品类型

### 全新设备
- iPhone 15 Pro
- Samsung Galaxy S24
- Google Pixel 8
- Xiaomi 14
- MacBook Pro 14"
- Dell XPS 15
- Lenovo ThinkPad X1
- HP Spectre x360
- iPad Pro 12.9"
- Samsung Galaxy Tab S9
- Microsoft Surface Pro

### 二手设备
- iPhone 13 Pro (A+)
- iPhone 12 (A)
- Samsung S22 (A)
- iPhone 11 (B)
- MacBook Air 2020 (A+)
- Dell XPS 13 2021 (A)
- ThinkPad T490 (B)
- iPad Air 2022 (A+)
- iPad 2021 (A)
- Galaxy Tab S8 (A)

### 配件
- USB-C 充电线
- 无线鼠标
- 蓝牙耳机
- 手机壳
- 屏幕保护膜
- 笔记本包
- 移动电源
- HDMI线

### 维修项目
- 屏幕更换
- 电池更换
- 充电口维修
- 主板维修
- 摄像头更换
- 扬声器维修
- 按键维修
- 系统重装
- 数据恢复
- 清洁保养

## 税务分类

### VAT 23%
- 适用于全新设备和配件
- 计算方式：销项税 - 进项税
- 销项税 = 销售额 × 23/123
- 进项税 = 成本 × 23/123

### Margin VAT
- 适用于部分二手设备
- 计算方式：(销售额 - 成本) × 23/123

### Service VAT 13.5%
- 适用于维修服务
- 计算方式：金额 × 13.5/113.5

## 如何使用

### 1. 访问批发商户中心
```
http://localhost:8080/merchant.html
```

### 2. 查看统计数据
- 我的库存：156 件
- 本月销售：实时计算
- 本月维修：实时计算
- 应缴税额：实时计算

### 3. 查看销售记录
点击"销售业务"标签，查看所有销售记录，包括：
- 日期
- 产品名称
- 类别
- 数量
- 销售额
- 成本
- 税额
- 支付方式

### 4. 查看维修记录
点击"维修业务"标签，查看所有维修记录，包括：
- 日期
- 客户姓名
- 维修项目
- 金额
- 税额
- 支付方式

### 5. 生成税务报表
1. 点击"税务报表"标签
2. 选择日期范围（默认为本月）
3. 点击"生成报表"按钮
4. 查看详细的税务计算明细

## 税务报表功能

### 日销售明细
- 按日期显示销售额
- 区分现金和刷卡收入
- 显示每日合计

### 税务计算明细
按税务分类显示：
- 销售额
- 销项税（如适用）
- 成本
- 进项税（如适用）
- 应缴税额

### 总计
- 总销售额
- 总现金收入
- 总刷卡收入
- 总应缴税额

## 重新生成数据

如需重新生成测试数据，运行：

```bash
node scripts/seed-merchant-test-data.js
```

这将：
1. 清除旧的测试数据
2. 生成新的30天数据
3. 显示统计信息

## API 接口

### 获取统计数据
```
GET /api/merchant/stats?merchantId=merchant_001
```

### 获取销售记录
```
GET /api/merchant/sales?merchantId=merchant_001
GET /api/merchant/sales?merchantId=merchant_001&startDate=2024-01-01&endDate=2024-01-31
```

### 获取维修记录
```
GET /api/merchant/repairs?merchantId=merchant_001
GET /api/merchant/repairs?merchantId=merchant_001&startDate=2024-01-01&endDate=2024-01-31
```

### 生成税务报表
```
GET /api/merchant/tax-report?merchantId=merchant_001&startDate=2024-01-01&endDate=2024-01-31
```

## 注意事项

1. 测试数据仅用于演示和测试目的
2. 所有金额均为欧元（EUR）
3. 日期和时间为随机生成，分布在过去30天内
4. 每天生成5-15笔销售和2-6笔维修
5. 支付方式随机分配（现金约40%，刷卡约60%）
6. 二手设备的税务分类随机选择VAT 23%或Margin VAT

## 下一步

- 实现库存管理功能
- 添加从仓库订货功能
- 完善报表中心
- 添加数据导出功能
