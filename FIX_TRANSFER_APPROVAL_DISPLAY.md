# ä¿®å¤è°ƒè´§ç®¡ç†æ˜¾ç¤ºé€»è¾‘ âœ…

## é—®é¢˜
1. è°ƒè´§ç®¡ç†ä¸­å¾…å®¡æ‰¹çš„è®¢å•åº”è¯¥åœ¨è°ƒå‡ºæ–¹è¿›è¡Œæ“ä½œ
2. è¿™ä¸ªè¯·æ±‚åº”è¯¥åœ¨è°ƒå‡ºæ–¹å’Œè°ƒå…¥æ–¹éƒ½æ˜¾ç¤ºæ•°æ®
3. ä½†æ‰¹å‡†å’Œæ‹’ç»çš„æ“ä½œåº”è¯¥åªå‘ç”Ÿåœ¨è°ƒå‡ºæ–¹

## ä¿®æ”¹å†…å®¹

### 1. ä¿®æ”¹å¾…å®¡æ‰¹åˆ—è¡¨æŸ¥è¯¢
**ä¹‹å‰**ï¼šåªæŸ¥è¯¢è°ƒå…¥æ–¹æ”¶åˆ°çš„å¾…å®¡æ‰¹è®°å½•
```javascript
const response = await fetch(`${API_BASE}/merchant/inventory/transfer/list?merchantId=${merchantId}&type=received&status=pending`);
```

**ç°åœ¨**ï¼šæŸ¥è¯¢æ‰€æœ‰ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„å¾…å®¡æ‰¹è®°å½•ï¼ˆä¸é™åˆ¶ typeï¼‰
```javascript
const response = await fetch(`${API_BASE}/merchant/inventory/transfer/list?merchantId=${merchantId}&status=pending`);
```

### 2. ä¿®æ”¹æ“ä½œæŒ‰é’®æ˜¾ç¤ºé€»è¾‘
**ä¹‹å‰**ï¼šæ‰€æœ‰å¾…å®¡æ‰¹è®°å½•éƒ½æ˜¾ç¤ºæ‰¹å‡†/æ‹’ç»æŒ‰é’®

**ç°åœ¨**ï¼šæ ¹æ®å½“å‰ç”¨æˆ·è§’è‰²æ˜¾ç¤ºä¸åŒå†…å®¹
- **è°ƒå‡ºæ–¹**ï¼šæ˜¾ç¤ºæ‰¹å‡†/æ‹’ç»æŒ‰é’®ï¼ˆå¯ä»¥æ“ä½œï¼‰
- **è°ƒå…¥æ–¹**ï¼šæ˜¾ç¤º"â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹"æç¤ºï¼ˆåªèƒ½æŸ¥çœ‹ï¼‰

### 3. ä¿®æ”¹ç”¨æˆ·åæ˜¾ç¤º
**ä¹‹å‰**ï¼šæ˜¾ç¤º `merchantName`ï¼ˆè”ç³»äººåç§°ï¼‰

**ç°åœ¨**ï¼šæ˜¾ç¤º `merchantId`ï¼ˆç”¨æˆ·åï¼‰
- è°ƒå‡ºæ–¹ï¼šæ˜¾ç¤º `transfer.fromMerchant`
- è°ƒå…¥æ–¹ï¼šæ˜¾ç¤º `transfer.toMerchant`

## ä»£ç ä¿®æ”¹

### merchant.html

#### 1. loadPendingApprovalList å‡½æ•°
```javascript
async function loadPendingApprovalList() {
  // è·å–æ‰€æœ‰å¾…å®¡æ‰¹çš„è°ƒè´§è®°å½•ï¼ˆä¸é™åˆ¶ typeï¼ŒåŒæ–¹éƒ½èƒ½çœ‹åˆ°ï¼‰
  const response = await fetch(`${API_BASE}/merchant/inventory/transfer/list?merchantId=${merchantId}&status=pending`);
  // ...
}
```

#### 2. renderTransferCard å‡½æ•° - æ“ä½œæŒ‰é’®éƒ¨åˆ†
```javascript
if (type === 'approval') {
  // åªæœ‰è°ƒå‡ºæ–¹å¯ä»¥æ‰¹å‡†æˆ–æ‹’ç»
  const isFromMerchant = transfer.fromMerchant === merchantId;
  if (isFromMerchant) {
    // æ˜¾ç¤ºæ‰¹å‡†/æ‹’ç»æŒ‰é’®
    actionButtons = `...`;
  } else {
    // è°ƒå…¥æ–¹åªèƒ½æŸ¥çœ‹ï¼Œæ˜¾ç¤ºç­‰å¾…å®¡æ‰¹æç¤º
    actionButtons = `
      <div style="margin-top: 15px; padding: 12px; background: #fef3c7; border-radius: 6px; text-align: center; color: #92400e;">
        â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹
      </div>
    `;
  }
}
```

#### 3. renderTransferCard å‡½æ•° - ç”¨æˆ·åæ˜¾ç¤º
```javascript
// è°ƒå‡ºæ–¹
<div style="font-weight: 600; color: #111827;">${transfer.fromMerchant}</div>

// è°ƒå…¥æ–¹
<div style="font-weight: 600; color: #111827;">${transfer.toMerchant}</div>
```

## æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: è°ƒå‡ºæ–¹æŸ¥çœ‹å¾…å®¡æ‰¹

1. **MurrayDundrum å‘èµ·è°ƒè´§ç”³è¯·**
   - ä» MurrayRanelagh è°ƒè´§

2. **MurrayRanelagh æŸ¥çœ‹å¾…å®¡æ‰¹**
   - ç™»å½• MurrayRanelagh
   - è¿›å…¥"è°ƒè´§ç®¡ç†" â†’ "å¾…å®¡æ‰¹"
   - çœ‹åˆ°è°ƒè´§è®°å½•
   - **æ˜¾ç¤ºæ‰¹å‡†/æ‹’ç»æŒ‰é’®**ï¼ˆå› ä¸ºæ˜¯è°ƒå‡ºæ–¹ï¼‰
   - å¯ä»¥ç‚¹å‡»æ‰¹å‡†æˆ–æ‹’ç»

### åœºæ™¯ 2: è°ƒå…¥æ–¹æŸ¥çœ‹å¾…å®¡æ‰¹

1. **MurrayDundrum æŸ¥çœ‹å¾…å®¡æ‰¹**
   - ç™»å½• MurrayDundrum
   - è¿›å…¥"è°ƒè´§ç®¡ç†" â†’ "å¾…å®¡æ‰¹"
   - çœ‹åˆ°åŒä¸€æ¡è°ƒè´§è®°å½•
   - **æ˜¾ç¤º"â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹"**ï¼ˆå› ä¸ºæ˜¯è°ƒå…¥æ–¹ï¼‰
   - ä¸èƒ½æ“ä½œï¼Œåªèƒ½æŸ¥çœ‹

### åœºæ™¯ 3: ç”¨æˆ·åæ˜¾ç¤º

**è°ƒè´§å¡ç‰‡æ˜¾ç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TRF202602050001  [å¾…å®¡æ‰¹]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è°ƒå‡ºæ–¹              è°ƒå…¥æ–¹          â”‚
â”‚ MurrayRanelagh  â†’  MurrayDundrum    â”‚
â”‚ Murray Electronics Limited          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸šåŠ¡é€»è¾‘

### æƒé™æ§åˆ¶
- âœ… åŒæ–¹éƒ½èƒ½çœ‹åˆ°å¾…å®¡æ‰¹çš„è°ƒè´§è®°å½•
- âœ… åªæœ‰è°ƒå‡ºæ–¹å¯ä»¥æ‰¹å‡†æˆ–æ‹’ç»
- âœ… è°ƒå…¥æ–¹åªèƒ½æŸ¥çœ‹ï¼Œä¸èƒ½æ“ä½œ

### æ˜¾ç¤ºé€»è¾‘
```
å¾…å®¡æ‰¹è®°å½•:
â”œâ”€ è°ƒå‡ºæ–¹ç™»å½•
â”‚  â””â”€ æ˜¾ç¤º [âœ… æ‰¹å‡†] [âŒ æ‹’ç»] æŒ‰é’®
â”‚
â””â”€ è°ƒå…¥æ–¹ç™»å½•
   â””â”€ æ˜¾ç¤º "â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹" æç¤º
```

### è§’è‰²åˆ¤æ–­
```javascript
const isFromMerchant = transfer.fromMerchant === merchantId;

if (isFromMerchant) {
  // å½“å‰ç”¨æˆ·æ˜¯è°ƒå‡ºæ–¹ â†’ æ˜¾ç¤ºæ“ä½œæŒ‰é’®
} else {
  // å½“å‰ç”¨æˆ·æ˜¯è°ƒå…¥æ–¹ â†’ æ˜¾ç¤ºç­‰å¾…æç¤º
}
```

## ä¼˜åŠ¿

### é€æ˜åº¦
- âœ… åŒæ–¹éƒ½èƒ½çœ‹åˆ°è°ƒè´§ç”³è¯·
- âœ… è°ƒå…¥æ–¹å¯ä»¥è¿½è¸ªç”³è¯·çŠ¶æ€
- âœ… è°ƒå‡ºæ–¹å¯ä»¥åŠæ—¶å¤„ç†ç”³è¯·

### æƒé™æ§åˆ¶
- âœ… åªæœ‰è°ƒå‡ºæ–¹å¯ä»¥æ“ä½œ
- âœ… é˜²æ­¢è°ƒå…¥æ–¹è¯¯æ“ä½œ
- âœ… æ¸…æ™°çš„è§’è‰²åŒºåˆ†

### ç”¨æˆ·ä½“éªŒ
- âœ… è°ƒå…¥æ–¹çœ‹åˆ°ç­‰å¾…æç¤ºï¼ŒçŸ¥é“éœ€è¦ç­‰å¾…
- âœ… è°ƒå‡ºæ–¹çœ‹åˆ°æ“ä½œæŒ‰é’®ï¼ŒçŸ¥é“éœ€è¦å¤„ç†
- âœ… æ˜¾ç¤ºç”¨æˆ·åè€Œä¸æ˜¯è”ç³»äººåç§°ï¼Œæ›´æ¸…æ™°

## å®Œæ•´æµç¨‹

```
1. MurrayDundrum å‘èµ·è°ƒè´§ç”³è¯·
   â””â”€ ä» MurrayRanelagh è°ƒè´§
   â””â”€ çŠ¶æ€: pending

2. åŒæ–¹éƒ½èƒ½åœ¨"å¾…å®¡æ‰¹"çœ‹åˆ°è®°å½•
   â”œâ”€ MurrayRanelagh (è°ƒå‡ºæ–¹)
   â”‚  â””â”€ æ˜¾ç¤º [âœ… æ‰¹å‡†] [âŒ æ‹’ç»] æŒ‰é’®
   â”‚
   â””â”€ MurrayDundrum (è°ƒå…¥æ–¹)
      â””â”€ æ˜¾ç¤º "â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹"

3. MurrayRanelagh æ‰¹å‡†è°ƒè´§
   â””â”€ ç‚¹å‡» [âœ… æ‰¹å‡†]
   â””â”€ çŠ¶æ€: pending â†’ approved

4. MurrayDundrum åœ¨"å¾…æ”¶è´§"çœ‹åˆ°è®°å½•
   â””â”€ ç‚¹å‡» [ğŸ“¦ ç¡®è®¤æ”¶è´§]
   â””â”€ çŠ¶æ€: approved â†’ completed
```

## æ³¨æ„äº‹é¡¹

1. **API æŸ¥è¯¢**
   - ä¸å†ä½¿ç”¨ `type=received` å‚æ•°
   - åªä½¿ç”¨ `status=pending` å‚æ•°
   - è¿”å›æ‰€æœ‰ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„å¾…å®¡æ‰¹è®°å½•

2. **æŒ‰é’®æ˜¾ç¤º**
   - æ ¹æ® `transfer.fromMerchant === merchantId` åˆ¤æ–­
   - è°ƒå‡ºæ–¹æ˜¾ç¤ºæ“ä½œæŒ‰é’®
   - è°ƒå…¥æ–¹æ˜¾ç¤ºç­‰å¾…æç¤º

3. **ç”¨æˆ·åæ˜¾ç¤º**
   - ä½¿ç”¨ `transfer.fromMerchant` å’Œ `transfer.toMerchant`
   - ä¸ä½¿ç”¨ `fromMerchantName` å’Œ `toMerchantName`

## æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1: è°ƒå‡ºæ–¹æ“ä½œ

1. **ç™»å½• MurrayDundrum**
   - å‘èµ·è°ƒè´§ç”³è¯·ï¼ˆä» MurrayRanelagh è°ƒè´§ï¼‰

2. **ç™»å½• MurrayRanelagh**
   - è¿›å…¥"è°ƒè´§ç®¡ç†" â†’ "å¾…å®¡æ‰¹"
   - éªŒè¯ï¼šçœ‹åˆ°è°ƒè´§è®°å½•
   - éªŒè¯ï¼šæ˜¾ç¤º [âœ… æ‰¹å‡†] [âŒ æ‹’ç»] æŒ‰é’®
   - ç‚¹å‡»"âœ… æ‰¹å‡†"
   - éªŒè¯ï¼šæ‰¹å‡†æˆåŠŸ

### æµ‹è¯• 2: è°ƒå…¥æ–¹æŸ¥çœ‹

1. **ç™»å½• MurrayDundrum**
   - å‘èµ·è°ƒè´§ç”³è¯·ï¼ˆä» MurrayRanelagh è°ƒè´§ï¼‰
   - è¿›å…¥"è°ƒè´§ç®¡ç†" â†’ "å¾…å®¡æ‰¹"
   - éªŒè¯ï¼šçœ‹åˆ°è°ƒè´§è®°å½•
   - éªŒè¯ï¼šæ˜¾ç¤º"â³ ç­‰å¾…è°ƒå‡ºæ–¹å®¡æ‰¹"
   - éªŒè¯ï¼šæ²¡æœ‰æ“ä½œæŒ‰é’®

### æµ‹è¯• 3: ç”¨æˆ·åæ˜¾ç¤º

1. **æŸ¥çœ‹ä»»æ„è°ƒè´§è®°å½•**
   - éªŒè¯ï¼šè°ƒå‡ºæ–¹æ˜¾ç¤ºç”¨æˆ·åï¼ˆä¾‹å¦‚ï¼šMurrayRanelaghï¼‰
   - éªŒè¯ï¼šè°ƒå…¥æ–¹æ˜¾ç¤ºç”¨æˆ·åï¼ˆä¾‹å¦‚ï¼šMurrayDundrumï¼‰
   - éªŒè¯ï¼šä¸æ˜¾ç¤ºè”ç³»äººåç§°

---
**å®Œæˆæ—¥æœŸ**: 2026-02-05
**çŠ¶æ€**: âœ… å·²ä¿®å¤
**å¯ä»¥æµ‹è¯•**: æ˜¯
