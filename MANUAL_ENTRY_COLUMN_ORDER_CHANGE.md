# 手动录入表格列顺序调整

## 修改内容
将"分类"列移到"数量"列之前，使用户可以先选择分类，再设置数量。

## 修改原因
用户反馈希望先选择分类，然后再设置数量。这样的顺序更符合操作逻辑：
1. 先选择产品分类（如"全新手机"）
2. 系统根据分类判断是否为设备产品
3. 再设置数量
4. 系统根据数量生成对应数量的IMEI输入框

## 列顺序对比

### 修改前
```
1. 产品名称
2. 品牌
3. 型号/规格
4. 颜色/类型
5. 数量          ← 旧位置
6. 进货价
7. 批发价
8. 零售价
9. 分类          ← 旧位置
10. 税务分类
11. 条码/IMEI/SN
12. 成色
13. 操作
```

### 修改后
```
1. 产品名称
2. 品牌
3. 型号/规格
4. 颜色/类型
5. 分类          ← 新位置（提前）
6. 数量          ← 新位置（延后）
7. 进货价
8. 批发价
9. 零售价
10. 税务分类
11. 条码/IMEI/SN
12. 成色
13. 操作
```

## 修改的文件

### `StockControl-main/public/prototype-working.html`

#### 修改1: 表格标题（第712-724行）
调整了 `<th>` 标签的顺序，将"分类"移到"数量"之前。

#### 修改2: 表格行生成（第3808-3880行）
在 `addManualProduct` 函数中，调整了 `<td>` 标签的顺序，将"分类"选择框移到"数量"输入框之前。

## 列索引说明

### 重要的列索引（未改变）
虽然调整了列的顺序，但以下关键列的索引**没有改变**：
- **颜色/类型列**: 索引3（不变）
- **条码/IMEI/SN列**: 索引10（不变）

这是因为我们只交换了"分类"（原索引8）和"数量"（原索引4）的位置，它们都在这两个关键列之间，所以不影响 `updateManualProductRow` 函数中使用的列索引。

### 新的列索引
```
索引0:  产品名称
索引1:  品牌
索引2:  型号/规格
索引3:  颜色/类型      ← updateManualProductRow 使用
索引4:  分类           ← 新位置
索引5:  数量           ← 新位置
索引6:  进货价
索引7:  批发价
索引8:  零售价
索引9:  税务分类
索引10: 条码/IMEI/SN   ← updateManualProductRow 使用
索引11: 成色
索引12: 操作
```

## 使用流程

### 新的操作流程
1. **填写基本信息**
   - 产品名称：iPhone 15 Pro
   - 品牌：Apple
   - 型号：15 Pro
   - 颜色：（留空，设备产品会自动生成多个颜色输入框）

2. **选择分类** ⚠️ 先选择分类
   - 分类：全新手机
   - 系统识别为设备产品

3. **设置数量** ⚠️ 再设置数量
   - 数量：2
   - 系统自动生成2个IMEI输入框和2个颜色输入框

4. **填写价格**
   - 进货价：800
   - 批发价：900
   - 零售价：1000

5. **填写IMEI和颜色**
   - IMEI 1: 123456789012345, 颜色: Natural Titanium
   - IMEI 2: 987654321098765, 颜色: Blue Titanium

6. **确认入库**

### 优势
- ✅ 更符合逻辑的操作顺序
- ✅ 先选择分类，系统可以立即判断产品类型
- ✅ 再设置数量，系统可以生成正确数量的IMEI输入框
- ✅ 减少用户操作错误

## 功能验证

### 测试1: 设备产品
1. 添加产品
2. 填写产品名称：iPhone 15 Pro
3. **选择分类：全新手机**（先选择）
4. **设置数量：2**（后设置）
5. **验证**：自动显示2个IMEI输入框和2个颜色输入框
6. 填写所有信息
7. 确认入库
8. **结果**：成功入库

### 测试2: 配件产品
1. 添加产品
2. 填写产品名称：iPhone Clear Case
3. **选择分类：配件**（先选择）
4. **设置数量：20**（后设置）
5. **验证**：显示单个条码输入框
6. 填写所有信息
7. 确认入库
8. **结果**：成功入库

### 测试3: 修改数量
1. 添加产品
2. **选择分类：全新手机**
3. 数量：1 → 验证显示1个IMEI输入框
4. 数量：3 → 验证显示3个IMEI输入框
5. 数量：5 → 验证显示5个IMEI输入框
6. **结果**：IMEI输入框数量正确更新

## 注意事项

### 1. 浏览器刷新
修改HTML文件后，必须强制刷新浏览器：
- **Windows**: Ctrl + Shift + R
- **Mac**: Cmd + Shift + R

### 2. 操作顺序建议
虽然可以先设置数量再选择分类，但建议按照新的列顺序操作：
1. 先选择分类
2. 再设置数量

这样可以确保系统正确识别产品类型并生成相应的输入框。

### 3. 列索引未改变
`updateManualProductRow` 函数中使用的列索引（3和10）没有改变，所以不需要修改该函数。

## 相关文档
- `MANUAL_ENTRY_ALL_FIXES_COMPLETE.md` - 所有修复总结
- `FIX_MANUAL_ENTRY_IMEI_DETECTION.md` - 设备检测关键字扩展
- `FIX_MANUAL_ENTRY_COLUMN_INDEX.md` - 列索引修复

## 状态
✅ **修改完成** - 表格列顺序已调整

---

**修改日期**: 2026-02-10
**修改人**: Kiro AI Assistant
