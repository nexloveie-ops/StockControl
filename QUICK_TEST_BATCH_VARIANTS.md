# 快速测试：批量创建变体功能

## 测试准备

### 1. 确认服务器运行
```bash
# 服务器应该已经在运行
# 访问: http://localhost:3000
```

### 2. 登录管理员账号
- 用户名: `admin`
- 密码: `admin123`

## 测试方法

### 方法1: 使用测试页面（推荐）

1. 访问测试页面：
   ```
   http://localhost:3000/test-batch-variants-ui.html
   ```

2. 按照页面上的测试步骤进行测试

3. 可以直接点击按钮执行API测试

### 方法2: 在管理员页面手动测试

#### 步骤1: 访问管理员页面
```
http://localhost:3000/admin.html
```

#### 步骤2: 登录
- 用户名: `admin`
- 密码: `admin123`

#### 步骤3: 进入入库管理
- 点击顶部的"入库管理"标签

#### 步骤4: 打开批量创建界面
- 找到"添加产品"按钮
- 旁边应该有一个紫色的"📦 批量创建变体"按钮
- 点击该按钮

#### 步骤5: 填写表单

**测试场景1: 创建手机壳变体**

基本信息：
- 产品名称: `iPhone Clear Case`
- 品牌: `Generic`
- 分类: `Phone Case`

维度1（型号）：
```
iPhone 13
iPhone 14
iPhone 14 Pro
```

维度2（颜色）：
```
Clear
Black
Blue
```

统一价格：
- 成本价: `5.00`
- 批发价: `8.00`
- 零售价: `12.00`

其他设置：
- 税务分类: `VAT_23`
- 成色: `BRAND_NEW`
- 初始库存: `0`
- 备注: `测试创建手机壳变体`

预期结果：
- 预览显示"将创建 9 个变体"
- 点击"批量创建所有变体"后成功创建
- 显示成功消息

**测试场景2: 创建屏幕保护膜变体**

基本信息：
- 产品名称: `Tempered Glass Screen Protector`
- 品牌: `Generic`
- 分类: `Screen Protector`

维度1（型号）：
```
iPhone 13
iPhone 14
```

维度2（类型）：
```
Clear
Privacy
```

统一价格：
- 成本价: `3.00`
- 批发价: `5.00`
- 零售价: `8.00`

其他设置：
- 税务分类: `VAT_23`
- 成色: `BRAND_NEW`
- 初始库存: `0`

预期结果：
- 预览显示"将创建 4 个变体"
- 成功创建4个变体

**测试场景3: 创建数据线变体**

基本信息：
- 产品名称: `USB-C to Lightning Cable`
- 品牌: `Generic`
- 分类: `Cable`

维度1（长度）：
- 维度标签选择: `Length`
```
1m
2m
3m
```

维度2（颜色）：
```
White
Black
```

统一价格：
- 成本价: `2.00`
- 批发价: `4.00`
- 零售价: `6.00`

其他设置：
- 税务分类: `VAT_23`
- 成色: `BRAND_NEW`
- 初始库存: `0`

预期结果：
- 预览显示"将创建 6 个变体"
- 成功创建6个变体

## 验证要点

### 1. 界面显示 ✅
- [ ] "批量创建变体"按钮显示正常
- [ ] 按钮颜色为紫色
- [ ] 按钮位置在"添加产品"旁边

### 2. 模态框功能 ✅
- [ ] 点击按钮后模态框弹出
- [ ] 模态框标题正确
- [ ] 分类下拉框有数据
- [ ] 税率下拉框有数据
- [ ] 成色下拉框有数据

### 3. 实时预览 ✅
- [ ] 输入维度选项时预览自动更新
- [ ] 显示正确的变体数量
- [ ] 显示维度组合信息
- [ ] 显示示例变体

### 4. 表单验证 ✅
- [ ] 必填字段验证正常
- [ ] 价格验证正常
- [ ] 维度选项验证正常

### 5. 创建功能 ✅
- [ ] 点击创建按钮后显示确认对话框
- [ ] 确认后成功调用API
- [ ] 显示成功消息
- [ ] 统计数据自动刷新

### 6. 错误处理 ✅
- [ ] API错误时显示错误消息
- [ ] 网络错误时显示错误消息

## 测试结果记录

### 测试场景1: 手机壳变体
- 执行时间: ___________
- 结果: ⬜ 成功 ⬜ 失败
- 创建数量: ___________
- 备注: ___________

### 测试场景2: 屏幕保护膜变体
- 执行时间: ___________
- 结果: ⬜ 成功 ⬜ 失败
- 创建数量: ___________
- 备注: ___________

### 测试场景3: 数据线变体
- 执行时间: ___________
- 结果: ⬜ 成功 ⬜ 失败
- 创建数量: ___________
- 备注: ___________

## 常见问题

### Q1: 点击按钮没有反应
**解决方法**:
1. 检查浏览器控制台是否有JavaScript错误
2. 确认已经加载了分类、税率、成色数据
3. 刷新页面重试

### Q2: 预览不更新
**解决方法**:
1. 确认维度文本框有内容
2. 检查是否每行一个选项
3. 检查是否有空行

### Q3: 创建失败
**解决方法**:
1. 检查网络连接
2. 查看浏览器控制台错误信息
3. 确认服务器正在运行
4. 检查API响应

### Q4: 分类/税率/成色下拉框为空
**解决方法**:
1. 确认已经登录管理员账号
2. 检查系统设置中是否有数据
3. 刷新页面重新加载数据

## 下一步

测试完成后，可以：

1. 查看创建的变体：
   - 在管理员页面的库存列表中查看
   - 使用搜索功能查找

2. 准备测试阶段3：
   - 商户销售界面优化
   - 变体选择对话框
   - 两步选择流程

## 测试完成标准

- ✅ 所有验证要点通过
- ✅ 至少完成3个测试场景
- ✅ 创建的变体数据正确
- ✅ 没有JavaScript错误
- ✅ 用户体验流畅

---
**测试日期**: 2026-02-05
**测试人员**: ___________
**测试状态**: ⬜ 通过 ⬜ 未通过
**备注**: ___________
