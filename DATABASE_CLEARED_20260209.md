# 数据库清理记录 - 2026-02-09

## 清理时间
2026-02-09

## 清理原因
重新测试维修小票打印功能和其他新功能。

## 清理内容

### 已清除的业务数据（共129条）

#### 产品数据（84条）
- productnews: 9条
- admininventories: 49条
- merchantinventories: 26条

#### 采购和销售数据（45条）
- purchaseinvoices: 2条（采购发票）
- salesinvoices: 2条（销售发票）
- merchantsales: 14条（商户销售）
- warehouseorders: 20条（仓库订单）
- inventorytransfers: 3条（调货记录）
- repairorders: 3条（维修订单）
- intercompanysalesinvoices: 1条（公司间销售发票）

### 保留的基础配置数据

#### 用户和权限
- 用户账号: 6条
  - admin
  - warehouse1
  - MurrayDundrum
  - MurrayRanelagh
  - 其他测试账号

#### 业务配置
- 供应商: 2条
- 客户: 2条
- 群组: 1条（MurrayGroup）

#### 系统配置
- 产品分类: 10条
- 产品成色: 2条
- VAT税率: 3条
- 公司信息: 1条

## 清理后状态
✅ 所有库存数据已清空
✅ 所有销售记录已清空
✅ 所有采购记录已清空
✅ 所有维修订单已清空
✅ 所有调货记录已清空
✅ 用户账号保留
✅ 基础配置保留

## 可以开始测试的功能

### 1. 维修业务
- 创建新维修订单
- 打印客户小票（英文）
- 打印车间小票（英文）
- 订单号格式：RO-XXXXXXXX
- 公司信息正确显示

### 2. 销售业务
- 销售小票打印（英文）
- 维修单显示为 "Repair Service"
- 销售记录搜索和打印

### 3. 采购入库
- 发票识别
- 手动入库
- 批量创建变体

### 4. 仓库调货
- 创建调货订单
- 确认收货

### 5. 群组库存
- 查看群组库存
- 变体选择

## 测试建议流程

### 阶段1：采购入库
1. 使用 warehouse1 账号登录
2. 上传采购发票或手动入库
3. 创建产品和库存

### 阶段2：仓库调货
1. 创建调货订单给商户
2. 商户确认收货

### 阶段3：维修业务
1. 使用商户账号登录
2. 创建维修订单
3. 测试打印客户小票
4. 测试打印车间小票
5. 从订单列表重新打印

### 阶段4：销售业务
1. 将维修订单加入购物车
2. 添加其他产品
3. 完成结账
4. 测试打印销售小票
5. 测试销售记录搜索和打印

## 注意事项
- 使用 Ctrl + Shift + R 强制刷新浏览器
- 服务器不需要重启
- 所有小票应该显示英文
- 订单号格式应该正确
- 公司信息应该正确显示

## 脚本位置
`StockControl-main/clear-all-business-data-correct.js`

## 执行命令
```bash
node clear-all-business-data-correct.js
```
