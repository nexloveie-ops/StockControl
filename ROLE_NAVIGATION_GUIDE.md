# 角色与页面导航指南

## 页面角色分配

### 1. 仓库管理系统（Warehouse Management）
**主页**: `prototype.html`

**相关页面**:
- `inventory.html` - 仓库库存管理
- `receiving.html` - 入库管理
- `product-management.html` - 产品管理
- `sales.html` - 销售管理

**导航规则**:
- 所有仓库相关页面的"返回主页"链接都指向 `prototype.html`
- 仓库页面之间可以互相导航
- 仓库管理员可以访问 `admin.html`（通过header中的"管理员"链接）

**用户角色**: 仓库管理员、管理员

---

### 2. 批发商户中心（Merchant Center）
**主页**: `merchant.html`

**功能标签页**:
- 我的库存 - 批发商自己店铺的库存（独立于仓库库存）
- 仓库订货 - 从仓库采购产品到批发商库存
- 销售业务 - 批发商的销售记录
- 维修业务 - 批发商的维修服务记录
- 报表中心 - 批发商的业务报表
- 税务报表 - 批发商的税务计算和报表

**导航规则**:
- 批发商页面是独立的，不链接到仓库管理页面
- 批发商只能访问 `merchant.html` 及其内部标签页
- 批发商不应该访问 `inventory.html`（那是仓库的库存）

**用户角色**: 批发商户

---

### 3. 管理员控制台（Admin Console）
**主页**: `admin.html`

**功能标签页**:
- 采购订单管理
- 供应商管理
- 报表分析
- 用户管理

**导航规则**:
- "返回主页"链接指向 `prototype.html`（仓库管理主页）
- 管理员可以访问所有页面

**用户角色**: 管理员

---

## 库存系统架构

### 仓库库存 vs 批发商库存

```
┌─────────────────────────────────────────────────────────┐
│                      仓库库存                            │
│                  (inventory.html)                       │
│                                                          │
│  • 仓库管理员管理                                        │
│  • 总库存数据                                            │
│  • 入库、出库、调拨                                      │
└─────────────────────────────────────────────────────────┘
                          │
                          │ 批发商订货
                          ↓
┌─────────────────────────────────────────────────────────┐
│                   批发商库存                             │
│              (merchant.html - 我的库存)                 │
│                                                          │
│  • 批发商独立管理                                        │
│  • 每个批发商有自己的库存                                │
│  • 从仓库采购后的产品                                    │
│  • 批发商自己的销售和维修                                │
└─────────────────────────────────────────────────────────┘
```

### 关键区别

| 特性 | 仓库库存 | 批发商库存 |
|------|---------|-----------|
| 管理者 | 仓库管理员 | 批发商 |
| 页面 | inventory.html | merchant.html |
| 数据范围 | 全部仓库产品 | 该批发商的产品 |
| 功能 | 入库、出库、调拨 | 销售、维修、订货 |
| 独立性 | 中央库存 | 每个批发商独立 |

---

## 登录后的页面跳转

根据用户角色，登录后应跳转到不同的主页：

- **仓库管理员** → `prototype.html`
- **批发商户** → `merchant.html`
- **管理员** → `admin.html` 或 `prototype.html`

---

## 当前实现状态

### ✅ 已实现
- 仓库管理系统的基本导航
- 批发商页面的基本结构
- 批发商的销售和维修记录展示
- 批发商的税务报表功能

### 🚧 待实现
- 批发商独立库存系统的后端API
- 批发商从仓库订货的功能
- 基于用户角色的登录跳转
- 批发商库存的数据展示

---

## 修复记录

### 2026-01-29
1. ✅ 移除了 `prototype.html` 中指向 `merchant.html` 的不当链接
2. ✅ 在 `merchant.html` 中明确说明批发商库存是独立系统
3. ✅ 更新了"仓库订货"功能的说明文字
4. ✅ 确认各角色页面的导航逻辑正确

---

## 下一步建议

1. **实现批发商库存系统**
   - 创建批发商库存数据模型
   - 添加后端API: `/api/merchant/inventory`
   - 实现前端数据展示

2. **实现仓库订货功能**
   - 批发商可以浏览仓库产品
   - 批发商可以下单采购
   - 产品从仓库转移到批发商库存

3. **优化登录跳转**
   - 根据用户角色跳转到对应主页
   - 添加角色权限验证

4. **添加角色权限控制**
   - 批发商不能访问仓库管理页面
   - 仓库管理员不能访问批发商页面
   - 管理员可以访问所有页面
