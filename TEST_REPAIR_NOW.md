# 🔧 维修业务 - 立即测试

## 🚀 快速开始

**服务器地址**：http://localhost:3000  
**登录账号**：merchant_001  
**密码**：merchant123

---

## ✅ 测试清单

### 第一步：创建自己维修订单

1. [ ] 登录系统
2. [ ] 点击 **"维修业务"** 标签
3. [ ] 点击 **"+ 新增维修订单"** 按钮
4. [ ] 填写信息：
   - 客户电话：`0851234567`
   - 客户姓名：`张三`
   - 设备名称：`iPhone 13 Pro`
   - IMEI：`123456789012345`
   - 问题描述：`屏幕破裂`
   - **维修地点：留空**
   - 维修费用：`150`
5. [ ] 点击 **"✅ 创建订单"**
6. [ ] 确认提示：**"状态: 待维修"**
7. [ ] 确认订单出现在列表中

**预期结果**：
- ✅ 状态显示：**待维修**（橙色）
- ✅ 维修地点显示：**自己维修**（绿色）

---

### 第二步：完成维修

1. [ ] 找到刚创建的订单
2. [ ] 点击 **"完成"** 按钮
3. [ ] 确认操作
4. [ ] 确认状态变为 **"已完成"**（青色）

---

### 第三步：标记为待销售

1. [ ] 点击 **"待销售"** 按钮
2. [ ] 确认操作
3. [ ] 确认状态变为 **"等待销售"**（粉色）

---

### 第四步：在销售业务中销售

1. [ ] 切换到 **"销售业务"** 标签
2. [ ] 确认看到 **"🔧 维修订单"** 卡片（橙色）
3. [ ] 确认显示 **"1 个待销售订单"**
4. [ ] 点击维修订单卡片
5. [ ] 确认看到订单详情：
   - 设备：iPhone 13 Pro
   - 客户：张三 (0851234567)
   - 维修费用：€150.00
   - 建议售价：€195.00
6. [ ] 点击 **"+ 加入购物车"**
7. [ ] 确认提示：**"已添加到购物车"**
8. [ ] 点击 **"🛒 查看购物车"**
9. [ ] 确认购物车内容：
   - 商品：iPhone 13 Pro（维修服务）
   - 单价：€195.00
   - 税率：Service VAT 13.5%
10. [ ] 选择支付方式：**现金**
11. [ ] 点击 **"💰 完成支付"**
12. [ ] 确认提示：**"销售完成！"**

---

### 第五步：验证订单状态

1. [ ] 切换回 **"维修业务"** 标签
2. [ ] 确认订单状态变为 **"已销售"**（灰色）
3. [ ] 确认不再显示操作按钮

---

### 第六步：创建外送维修订单

1. [ ] 点击 **"+ 新增维修订单"**
2. [ ] 填写信息：
   - 客户电话：`0851234568`
   - 客户姓名：`李四`
   - 设备名称：`Samsung S21`
   - IMEI：`987654321098765`
   - 问题描述：`电池更换`
   - **维修地点：`ABC Repair Shop`**（填写表示外送）
   - 维修费用：`80`
3. [ ] 点击 **"✅ 创建订单"**
4. [ ] 确认提示：**"状态: 已送出"**
5. [ ] 确认状态显示：**已送出**（紫色）
6. [ ] 确认维修地点显示：**ABC Repair Shop**

---

### 第七步：外送维修流程

1. [ ] 点击 **"已取回"** 按钮
2. [ ] 确认状态变为 **"已取回"**（绿色）
3. [ ] 点击 **"待销售"** 按钮
4. [ ] 确认状态变为 **"等待销售"**（粉色）

---

### 第八步：销售外送维修订单

1. [ ] 切换到 **"销售业务"** 标签
2. [ ] 点击 **"🔧 维修订单"** 卡片
3. [ ] 确认看到 Samsung S21
4. [ ] 确认建议售价：€104.00（80 × 1.3）
5. [ ] 点击 **"+ 加入购物车"**
6. [ ] 选择支付方式：**刷卡**
7. [ ] 点击 **"💰 完成支付"**
8. [ ] 确认销售完成

---

### 第九步：测试状态筛选

1. [ ] 切换到 **"维修业务"** 标签
2. [ ] 点击 **"待维修"** 按钮（橙色）
3. [ ] 确认只显示待维修的订单
4. [ ] 点击 **"已送出"** 按钮（紫色）
5. [ ] 确认只显示已送出的订单
6. [ ] 点击 **"等待销售"** 按钮（粉色）
7. [ ] 确认只显示等待销售的订单
8. [ ] 点击 **"全部"** 按钮（蓝色）
9. [ ] 确认显示所有订单

---

### 第十步：查看销售记录

1. [ ] 切换到 **"销售记录查询"** 标签
2. [ ] 点击 **"查询"** 按钮
3. [ ] 确认看到维修订单的销售记录
4. [ ] 点击 **"展开"** 查看详情
5. [ ] 确认显示：
   - 商品名称（维修服务）
   - 税务分类：Service VAT 13.5%
   - 税额计算正确

---

## 🎯 关键检查点

### 状态流转
- [ ] 自己维修：待维修 → 已完成 → 等待销售 → 已销售
- [ ] 外送维修：已送出 → 已取回 → 等待销售 → 已销售

### 价格计算
- [ ] 建议售价 = 维修费用 × 1.3
- [ ] 税额 = 销售额 × 13.5 / 113.5

### 界面显示
- [ ] 状态标签颜色正确
- [ ] 操作按钮根据状态显示
- [ ] 维修地点正确显示
- [ ] 购物车显示正确

### 数据一致性
- [ ] 销售后订单状态更新
- [ ] 销售记录正确保存
- [ ] 税额计算准确

---

## 🐛 常见问题

### 问题：维修订单不显示在销售业务中
**解决**：确认订单状态为 "等待销售"、"已完成" 或 "已取回"

### 问题：无法创建订单
**解决**：检查必填字段（客户电话、设备名称、问题描述）

### 问题：状态更新失败
**解决**：刷新页面，检查网络连接

---

## 📊 测试数据

### 测试订单 1（自己维修）
```
客户电话：0851234567
客户姓名：张三
设备名称：iPhone 13 Pro
IMEI：123456789012345
问题描述：屏幕破裂
维修地点：留空
维修费用：€150.00
建议售价：€195.00
```

### 测试订单 2（外送维修）
```
客户电话：0851234568
客户姓名：李四
设备名称：Samsung S21
IMEI：987654321098765
问题描述：电池更换
维修地点：ABC Repair Shop
维修费用：€80.00
建议售价：€104.00
```

---

## ✨ 测试完成

完成所有测试后，你应该：

✅ 创建了 2 个维修订单  
✅ 完成了完整的维修流程  
✅ 成功销售了维修订单  
✅ 验证了状态筛选功能  
✅ 查看了销售记录  

**恭喜！维修业务功能测试完成！** 🎉

---

## 📝 测试记录

**测试日期**：__________  
**测试人员**：__________  
**测试结果**：[ ] 通过  [ ] 失败  
**问题记录**：

```
（在此记录测试中发现的问题）
```

---

## 🔗 相关文档

- `REPAIR_BUSINESS_FEATURE.md` - 功能详细说明
- `QUICK_TEST_REPAIR_BUSINESS.md` - 详细测试指南
- `REPAIR_BUSINESS_STATUS.md` - 实现状态

---

**开始测试**：http://localhost:3000  
**祝测试顺利！** 🚀
