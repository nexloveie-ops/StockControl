# 销售结账价格编辑功能

## 功能说明
在销售业务结账时，每个产品的价格可以修改，系统自动计算小计和实际收款金额。

## 修改内容

### 1. 结账界面调整
- **产品价格**：可编辑（输入框）
- **产品小计**：自动计算（价格 × 数量）
- **总小计**：自动汇总所有产品小计
- **实际收款**：只读显示，等于总小计

### 2. 功能特点
- 修改任何产品价格后，自动更新：
  - 该产品的小计
  - 总小计
  - 实际收款金额
- 混合支付时，自动调整现金和刷卡金额比例
- 价格修改后的值会保存到购物车，用于最终结账

### 3. 使用流程
1. 点击"结账"按钮
2. 在结账界面，可以修改每个产品的价格
3. 修改后自动计算小计和总金额
4. 选择支付方式
5. 确认支付

## 代码修改

### merchant.html (v2.0.8)

**新增函数**：
```javascript
function updateItemPrice(index) {
  // 更新购物车中的价格
  // 重新计算该产品小计
  // 重新计算总金额
  // 自动调整混合支付金额
}
```

**修改函数**：
- `showCheckoutModal()`: 显示可编辑的价格输入框
- `completeSale()`: 简化逻辑，不再有 subtotal 和 discount

**删除函数**：
- `updateActualAmount()`: 不再需要

## 测试步骤
1. 强制刷新页面（Ctrl+F5）
2. 确认版本号 v2.0.8
3. 添加产品到购物车
4. 点击"结账"
5. 修改产品价格，验证小计和总金额自动更新
6. 完成支付

## 完成时间
2026-02-06

## 状态
✅ 已完成
