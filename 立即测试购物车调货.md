# 立即测试购物车调货功能 🛒

## 快速开始

### 1. 访问系统
```
http://localhost:3000/merchant.html
```

### 2. 登录 MurrayDundrum
- 用户名: `MurrayDundrum`
- 密码: `password123`

### 3. 进入群组库存
- 点击顶部的"群组库存"标签

### 4. 选择分类
- 点击任意分类卡片（例如：手机）

## 测试设备调货

### 步骤 1: 查看设备详情
- 找到产品列表
- 点击"查看详情"按钮
- 展开序列号列表

### 步骤 2: 添加设备到购物车
- 点击单个设备的"🛒 加入清单"按钮
- 应该看到：
  - 右侧购物车数量增加
  - 显示产品信息
  - 显示 SN/IMEI
  - 显示成色

### 步骤 3: 添加多个设备
- 继续点击其他设备的"加入清单"按钮
- 购物车数量继续增加
- 每个设备单独显示

### 步骤 4: 查看购物车
右侧购物车应该显示：
- 🛒 调货清单 (数量)
- 每个设备的详细信息
- 总金额
- "提交调货申请"按钮
- "清空清单"按钮

### 步骤 5: 提交调货申请
- 点击"提交调货申请"按钮
- 应该看到确认对话框：
  - 📦 内部调拨（如果同一公司）
  - 双方公司信息
  - 产品清单（含 SN/IMEI）
  - 价格（成本价）
  - 总金额

### 步骤 6: 确认提交
- 点击"✅ 确认调货"按钮
- 应该显示成功消息和调货单号
- 购物车自动清空已提交的产品

## 测试配件调货

### 步骤 1: 返回分类列表
- 点击"← 返回分类"按钮

### 步骤 2: 选择配件分类
- 选择一个配件分类

### 步骤 3: 添加配件
- 点击"🛒 加入清单"按钮
- 输入数量（例如：5）
- 点击确定

### 步骤 4: 调整数量
在购物车中：
- 点击 + 按钮增加数量
- 点击 - 按钮减少数量
- 验证数量变化

### 步骤 5: 提交调货申请
- 点击"提交调货申请"
- 查看确认对话框
- 确认提交

## 测试混合调货

### 添加多种产品
1. 添加 2 台 iPhone（设备）
2. 添加 10 个充电线（配件）
3. 添加 1 台 Samsung（设备）

### 查看购物车
应该显示：
- 3 个产品
- 设备显示 SN/IMEI
- 配件显示数量和 +/- 按钮
- 总金额

### 提交调货
- 点击"提交调货申请"
- 确认对话框应该显示所有产品
- 设备显示 SN/IMEI
- 配件显示数量

## 验证要点

### 购物车功能 ✅
- [ ] 显示产品数量
- [ ] 显示总金额
- [ ] 设备显示 SN/IMEI
- [ ] 配件可以调整数量
- [ ] 可以移除产品
- [ ] 可以清空购物车

### 设备调货 ✅
- [ ] 必须展开详情才能添加
- [ ] 每个设备单独添加
- [ ] 显示 SN/IMEI/成色
- [ ] 数量固定为 1
- [ ] 不能调整数量

### 配件调货 ✅
- [ ] 可以输入数量
- [ ] 可以在购物车中调整
- [ ] 检查库存限制
- [ ] 显示数量和 +/- 按钮

### 确认对话框 ✅
- [ ] 显示交易类型
- [ ] 显示公司信息
- [ ] 显示产品清单（含 SN/IMEI）
- [ ] 显示价格类型
- [ ] 显示金额汇总

## 常见问题

### Q1: 看不到购物车？
**A**: 刷新页面（Ctrl+F5）清除缓存

### Q2: 点击"加入清单"没反应？
**A**: 
1. 打开浏览器控制台（F12）
2. 查看是否有错误
3. 确认 transfer-cart.js 已加载

### Q3: 设备无法添加到购物车？
**A**: 
1. 确认已点击"查看详情"展开列表
2. 确认点击的是单个设备的"加入清单"按钮

### Q4: 配件数量无法调整？
**A**: 
1. 确认是配件（不是设备）
2. 设备数量固定为 1，不能调整

### Q5: 提交后购物车没有清空？
**A**: 
1. 检查是否提交成功
2. 查看浏览器控制台错误信息

## 测试数据

### 当前配置
- MurrayRanelagh: Murray Electronics Limited
- MurrayDundrum: Murray Electronics Limited
- 交易类型: 内部调拨

### 可用产品
- iPhone 12 128GB (1 台)
- iPhone 14 128GB (1 台)
- Lightning Cable (98 件)

## 下一步

测试完成后：
1. 查看调货记录（待实现）
2. 审批调货申请（待实现）
3. 确认收货（待实现）

---
**服务器**: http://localhost:3000
**测试时间**: 约 10 分钟
**难度**: 简单 ⭐
