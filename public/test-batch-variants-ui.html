<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹è¯•æ‰¹é‡åˆ›å»ºå˜ä½“ç•Œé¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f7fa;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    }
    h1 {
      color: #2d3748;
      margin-bottom: 20px;
    }
    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f7fafc;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    .test-section h2 {
      color: #4a5568;
      font-size: 18px;
      margin-bottom: 15px;
    }
    .test-result {
      padding: 15px;
      border-radius: 6px;
      margin-top: 10px;
    }
    .success {
      background: #c6f6d5;
      color: #22543d;
      border: 1px solid #9ae6b4;
    }
    .error {
      background: #fed7d7;
      color: #742a2a;
      border: 1px solid #fc8181;
    }
    .info {
      background: #bee3f8;
      color: #2c5282;
      border: 1px solid #90cdf4;
    }
    button {
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }
    button:hover {
      background: #5a67d8;
    }
    .btn-secondary {
      background: #718096;
    }
    .btn-secondary:hover {
      background: #4a5568;
    }
    pre {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ“¦ æ‰¹é‡åˆ›å»ºå˜ä½“ç•Œé¢æµ‹è¯•</h1>
    
    <div class="test-section">
      <h2>æµ‹è¯•1: è®¿é—®ç®¡ç†å‘˜é¡µé¢</h2>
      <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è®¿é—®ç®¡ç†å‘˜é¡µé¢ï¼ŒæŸ¥çœ‹"æ‰¹é‡åˆ›å»ºå˜ä½“"æŒ‰é’®æ˜¯å¦æ˜¾ç¤º</p>
      <button onclick="window.open('/admin.html', '_blank')">æ‰“å¼€ç®¡ç†å‘˜é¡µé¢</button>
      <div class="test-result info">
        <strong>éªŒè¯è¦ç‚¹ï¼š</strong><br>
        1. ç™»å½•ç®¡ç†å‘˜è´¦å·ï¼ˆadmin / admin123ï¼‰<br>
        2. è¿›å…¥"å…¥åº“ç®¡ç†"æ ‡ç­¾<br>
        3. æŸ¥çœ‹"æ·»åŠ äº§å“"æŒ‰é’®æ—è¾¹æ˜¯å¦æœ‰"ğŸ“¦ æ‰¹é‡åˆ›å»ºå˜ä½“"æŒ‰é’®<br>
        4. æŒ‰é’®é¢œè‰²åº”ä¸ºç´«è‰²
      </div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•2: æ‰“å¼€æ‰¹é‡åˆ›å»ºæ¨¡æ€æ¡†</h2>
      <p>åœ¨ç®¡ç†å‘˜é¡µé¢ç‚¹å‡»"æ‰¹é‡åˆ›å»ºå˜ä½“"æŒ‰é’®ï¼ŒæŸ¥çœ‹æ¨¡æ€æ¡†æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</p>
      <div class="test-result info">
        <strong>éªŒè¯è¦ç‚¹ï¼š</strong><br>
        1. æ¨¡æ€æ¡†åº”è¯¥å¼¹å‡º<br>
        2. æ ‡é¢˜æ˜¾ç¤º"ğŸ“¦ æ‰¹é‡åˆ›å»ºäº§å“å˜ä½“"<br>
        3. åˆ†ç±»ä¸‹æ‹‰æ¡†åº”è¯¥æœ‰æ•°æ®<br>
        4. ç¨ç‡ä¸‹æ‹‰æ¡†åº”è¯¥æœ‰æ•°æ®<br>
        5. æˆè‰²ä¸‹æ‹‰æ¡†åº”è¯¥æœ‰æ•°æ®<br>
        6. é¢„è§ˆåŒºåŸŸæ˜¾ç¤º"è¯·å¡«å†™ç»´åº¦é€‰é¡¹ä»¥æŸ¥çœ‹é¢„è§ˆ"
      </div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•3: å®æ—¶é¢„è§ˆåŠŸèƒ½</h2>
      <p>å¡«å†™ç»´åº¦é€‰é¡¹ï¼ŒæŸ¥çœ‹é¢„è§ˆæ˜¯å¦å®æ—¶æ›´æ–°</p>
      <div class="test-result info">
        <strong>æµ‹è¯•æ­¥éª¤ï¼š</strong><br>
        1. åœ¨ç»´åº¦1æ–‡æœ¬æ¡†è¾“å…¥ï¼š<br>
        <pre>iPhone 13
iPhone 14
iPhone 14 Pro</pre>
        2. åœ¨ç»´åº¦2æ–‡æœ¬æ¡†è¾“å…¥ï¼š<br>
        <pre>Clear
Black
Blue</pre>
        3. é¢„è§ˆåŒºåŸŸåº”è¯¥æ˜¾ç¤º"å°†åˆ›å»º 9 ä¸ªå˜ä½“"<br>
        4. æ˜¾ç¤º"3 ä¸ªModel Ã— 3 ä¸ªColor"<br>
        5. æ˜¾ç¤ºç¤ºä¾‹å˜ä½“
      </div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•4: åˆ›å»ºæ‰‹æœºå£³å˜ä½“</h2>
      <button onclick="testCreatePhoneCase()">æ‰§è¡Œæµ‹è¯•</button>
      <button class="btn-secondary" onclick="clearResult('result4')">æ¸…é™¤ç»“æœ</button>
      <div id="result4"></div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•5: åˆ›å»ºå±å¹•ä¿æŠ¤è†œå˜ä½“</h2>
      <button onclick="testCreateScreenProtector()">æ‰§è¡Œæµ‹è¯•</button>
      <button class="btn-secondary" onclick="clearResult('result5')">æ¸…é™¤ç»“æœ</button>
      <div id="result5"></div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•6: åˆ›å»ºæ•°æ®çº¿å˜ä½“</h2>
      <button onclick="testCreateCable()">æ‰§è¡Œæµ‹è¯•</button>
      <button class="btn-secondary" onclick="clearResult('result6')">æ¸…é™¤ç»“æœ</button>
      <div id="result6"></div>
    </div>

    <div class="test-section">
      <h2>æµ‹è¯•7: è¡¨å•éªŒè¯</h2>
      <p>æµ‹è¯•å„ç§éªŒè¯åœºæ™¯</p>
      <div class="test-result info">
        <strong>éªŒè¯åœºæ™¯ï¼š</strong><br>
        1. ä¸å¡«å†™äº§å“åç§° â†’ åº”è¯¥æç¤ºé”™è¯¯<br>
        2. ä¸é€‰æ‹©åˆ†ç±» â†’ åº”è¯¥æç¤ºé”™è¯¯<br>
        3. ç»´åº¦1ä¸ºç©º â†’ åº”è¯¥æç¤ºé”™è¯¯<br>
        4. ç»´åº¦2ä¸ºç©º â†’ åº”è¯¥æç¤ºé”™è¯¯<br>
        5. ä¸é€‰æ‹©ç¨åŠ¡åˆ†ç±» â†’ åº”è¯¥æç¤ºé”™è¯¯<br>
        6. ä¸é€‰æ‹©æˆè‰² â†’ åº”è¯¥æç¤ºé”™è¯¯
      </div>
    </div>
  </div>

  <script>
    const API_BASE = '/api';

    function clearResult(id) {
      document.getElementById(id).innerHTML = '';
    }

    async function testCreatePhoneCase() {
      const resultDiv = document.getElementById('result4');
      resultDiv.innerHTML = '<div class="test-result info">æµ‹è¯•ä¸­...</div>';

      try {
        const response = await fetch(`${API_BASE}/admin/inventory/batch-create-variants`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            merchantId: 'admin',
            productName: 'iPhone Clear Case (UI Test)',
            brand: 'Generic',
            category: 'Phone Case',
            dimension1Label: 'Model',
            dimension1Values: ['iPhone 13', 'iPhone 14', 'iPhone 14 Pro'],
            dimension2Label: 'Color',
            dimension2Values: ['Clear', 'Black', 'Blue'],
            costPrice: 5.00,
            wholesalePrice: 8.00,
            retailPrice: 12.00,
            taxClassification: 'VAT_23',
            condition: 'BRAND_NEW',
            initialQuantity: 0,
            notes: 'UIæµ‹è¯• - æ‰‹æœºå£³å˜ä½“'
          })
        });

        const result = await response.json();

        if (result.success) {
          resultDiv.innerHTML = `
            <div class="test-result success">
              <strong>âœ… æµ‹è¯•æˆåŠŸï¼</strong><br>
              åˆ›å»ºäº† ${result.data.created} ä¸ªå˜ä½“<br>
              äº§å“åç§°: ${result.data.productName}<br>
              ç»´åº¦1æ•°é‡: ${result.data.dimension1Count}<br>
              ç»´åº¦2æ•°é‡: ${result.data.dimension2Count}
            </div>
            <pre>${JSON.stringify(result, null, 2)}</pre>
          `;
        } else {
          throw new Error(result.message || 'åˆ›å»ºå¤±è´¥');
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <div class="test-result error">
            <strong>âŒ æµ‹è¯•å¤±è´¥</strong><br>
            ${error.message}
          </div>
        `;
      }
    }

    async function testCreateScreenProtector() {
      const resultDiv = document.getElementById('result5');
      resultDiv.innerHTML = '<div class="test-result info">æµ‹è¯•ä¸­...</div>';

      try {
        const response = await fetch(`${API_BASE}/admin/inventory/batch-create-variants`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            merchantId: 'admin',
            productName: 'Tempered Glass Screen Protector (UI Test)',
            brand: 'Generic',
            category: 'Screen Protector',
            dimension1Label: 'Model',
            dimension1Values: ['iPhone 13', 'iPhone 14'],
            dimension2Label: 'Type',
            dimension2Values: ['Clear', 'Privacy'],
            costPrice: 3.00,
            wholesalePrice: 5.00,
            retailPrice: 8.00,
            taxClassification: 'VAT_23',
            condition: 'BRAND_NEW',
            initialQuantity: 0,
            notes: 'UIæµ‹è¯• - å±å¹•ä¿æŠ¤è†œå˜ä½“'
          })
        });

        const result = await response.json();

        if (result.success) {
          resultDiv.innerHTML = `
            <div class="test-result success">
              <strong>âœ… æµ‹è¯•æˆåŠŸï¼</strong><br>
              åˆ›å»ºäº† ${result.data.created} ä¸ªå˜ä½“<br>
              äº§å“åç§°: ${result.data.productName}<br>
              ç»´åº¦1æ•°é‡: ${result.data.dimension1Count}<br>
              ç»´åº¦2æ•°é‡: ${result.data.dimension2Count}
            </div>
            <pre>${JSON.stringify(result, null, 2)}</pre>
          `;
        } else {
          throw new Error(result.message || 'åˆ›å»ºå¤±è´¥');
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <div class="test-result error">
            <strong>âŒ æµ‹è¯•å¤±è´¥</strong><br>
            ${error.message}
          </div>
        `;
      }
    }

    async function testCreateCable() {
      const resultDiv = document.getElementById('result6');
      resultDiv.innerHTML = '<div class="test-result info">æµ‹è¯•ä¸­...</div>';

      try {
        const response = await fetch(`${API_BASE}/admin/inventory/batch-create-variants`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            merchantId: 'admin',
            productName: 'USB-C to Lightning Cable (UI Test)',
            brand: 'Generic',
            category: 'Cable',
            dimension1Label: 'Length',
            dimension1Values: ['1m', '2m', '3m'],
            dimension2Label: 'Color',
            dimension2Values: ['White', 'Black'],
            costPrice: 2.00,
            wholesalePrice: 4.00,
            retailPrice: 6.00,
            taxClassification: 'VAT_23',
            condition: 'BRAND_NEW',
            initialQuantity: 0,
            notes: 'UIæµ‹è¯• - æ•°æ®çº¿å˜ä½“'
          })
        });

        const result = await response.json();

        if (result.success) {
          resultDiv.innerHTML = `
            <div class="test-result success">
              <strong>âœ… æµ‹è¯•æˆåŠŸï¼</strong><br>
              åˆ›å»ºäº† ${result.data.created} ä¸ªå˜ä½“<br>
              äº§å“åç§°: ${result.data.productName}<br>
              ç»´åº¦1æ•°é‡: ${result.data.dimension1Count}<br>
              ç»´åº¦2æ•°é‡: ${result.data.dimension2Count}
            </div>
            <pre>${JSON.stringify(result, null, 2)}</pre>
          `;
        } else {
          throw new Error(result.message || 'åˆ›å»ºå¤±è´¥');
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <div class="test-result error">
            <strong>âŒ æµ‹è¯•å¤±è´¥</strong><br>
            ${error.message}
          </div>
        `;
      }
    }
  </script>
</body>
</html>
