<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•ä»·æ ¼å¯¹è¯æ¡†</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>æµ‹è¯•ä»·æ ¼å¯¹è¯æ¡†æ•°æ®ä¼ é€’</h1>
    <button onclick="testDialog()">æ˜¾ç¤ºæµ‹è¯•å¯¹è¯æ¡†</button>
    
    <script>
        // æ¨¡æ‹Ÿè°ƒè´§è®¢å•æ•°æ®
        const testTransfer = {
            _id: 'test123',
            transferNumber: 'TRF20260211001',
            items: [
                {
                    productName: 'IPHONE11',
                    serialNumber: '111222',
                    transferPrice: 195,
                    retailPrice: 249,
                    quantity: 1
                },
                {
                    productName: 'IPAD11',
                    serialNumber: '111333',
                    transferPrice: 315,
                    retailPrice: 379,
                    quantity: 1
                },
                {
                    productName: 'iPhone Screen Saver',
                    transferPrice: 2,
                    retailPrice: 10,
                    quantity: 2
                }
            ]
        };
        
        function testDialog() {
            console.log('=== æ˜¾ç¤ºä»·æ ¼è®¾ç½®å¯¹è¯æ¡† ===');
            console.log('è®¢å•:', testTransfer);
            console.log('äº§å“åˆ—è¡¨:', testTransfer.items);
            
            const modal = document.createElement('div');
            modal.id = 'priceSettingModal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            
            // ä¸ºæ¯ä¸ªäº§å“ç”Ÿæˆä»·æ ¼è¾“å…¥è¡¨å•
            const priceInputs = testTransfer.items.map((item, index) => {
                console.log(`äº§å“ ${index + 1}:`, item.productName);
                console.log('  - transferPrice:', item.transferPrice);
                console.log('  - retailPrice:', item.retailPrice);
                
                return `
                <div style="background: #f9fafb; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #6366f1;">
                  <div style="font-weight: 600; margin-bottom: 10px; color: #111827;">${item.productName}</div>
                  <div style="font-size: 13px; color: #6b7280; margin-bottom: 10px;">
                    ${item.serialNumber ? `åºåˆ—å·: ${item.serialNumber}` : `æ•°é‡: ${item.quantity}`}
                  </div>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                      <label style="display: block; font-size: 13px; font-weight: 600; margin-bottom: 5px; color: #374151;">æ‰¹å‘ä»· (â‚¬) *</label>
                      <input type="number" id="wholesalePrice_${index}" min="0" step="0.01" required
                             value="${item.transferPrice || ''}"
                             style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                      <small style="color: #6b7280; font-size: 11px;">é»˜è®¤ä¸ºåŸäº§å“æ‰¹å‘ä»· (${item.transferPrice || 'æ— '})</small>
                    </div>
                    <div>
                      <label style="display: block; font-size: 13px; font-weight: 600; margin-bottom: 5px; color: #374151;">é›¶å”®ä»· (â‚¬) *</label>
                      <input type="number" id="retailPrice_${index}" min="0" step="0.01" required
                             value="${item.retailPrice || ''}"
                             style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                      <small style="color: #6b7280; font-size: 11px;">é»˜è®¤ä¸ºåŸäº§å“é›¶å”®ä»· (${item.retailPrice || 'æ— '})</small>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 12px; padding: 30px; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                  <h2 style="margin: 0 0 10px 0; color: #111827;">ğŸ’° è®¾ç½®äº§å“ä»·æ ¼</h2>
                  <p style="color: #6b7280; margin-bottom: 20px; font-size: 14px;">
                    è¿™æ˜¯å…¬å¸é—´é”€å”®ï¼Œè¯·ä¸ºæ¯ä¸ªäº§å“è®¾ç½®æ‰¹å‘ä»·å’Œé›¶å”®ä»·ã€‚
                  </p>
                  
                  <div style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;">
                    ${priceInputs}
                  </div>
                  
                  <div style="display: flex; gap: 10px;">
                    <button onclick="closeDialog()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #374151; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 15px;">
                      å…³é—­
                    </button>
                  </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeDialog() {
            const modal = document.getElementById('priceSettingModal');
            if (modal) {
                modal.remove();
            }
        }
    </script>
</body>
</html>
